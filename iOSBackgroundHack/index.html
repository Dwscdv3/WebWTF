<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>iOS Background Hack</title>
  </head>
  <body>
    <audio id="audio" controls loop></audio>
    <script>

// https://stackoverflow.com/a/71316630

let ctx = new AudioContext();

let bufferSize = 2 * ctx.sampleRate, 
    emptyBuffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate), 
    output = emptyBuffer.getChannelData(0);

for (let i = 0; i < bufferSize; i++) 
    output[i] = 0;

let source = ctx.createBufferSource();
source.buffer = emptyBuffer;
source.loop = true;

let node = ctx.createMediaStreamDestination();
source.connect(node);

let audio = document.getElementById("audio");
audio.srcObject = node.stream;

document.addEventListener("touchend", () => {
    if (audioCtx.state != "running")
        ctx.resume();
};

    </script>
  </body>
</html>
